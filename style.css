:root {
    --pink: #ff2d75;
    --dark-bg: #050505;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body, html {
    margin: 0; padding: 0;
    background: var(--dark-bg);
    color: white; font-family: 'Quicksand', sans-serif;
    overflow: hidden; height: 100vh; width: 100vw;
}

.phase {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    display: none; justify-content: center; align-items: center;
    flex-direction: column; z-index: 10;
}
.phase.active { display: flex; }

#music-control {
    position: fixed; top: 20px; right: 20px; z-index: 1000;
    background: rgba(255, 45, 117, 0.2); border: 1px solid var(--pink);
    color: white; padding: 8px; border-radius: 50%; cursor: pointer;
    width: 45px; height: 45px; display: none; align-items: center; 
    justify-content: center; font-size: 1.2rem;
}

.char-group {
    display: flex; align-items: center; justify-content: center;
    gap: 20px; width: 100%; max-width: 500px; position: relative;
}
.emoji { 
    font-size: clamp(65px, 18vw, 90px); position: relative; 
    transition: transform 3.5s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 1s; 
}
#heart-gift { 
    font-size: clamp(40px, 12vw, 55px); opacity: 0; 
    transform: scale(0) translateX(-60px); 
    transition: opacity 0.6s 3.5s, transform 0.8s 3.7s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
}

@keyframes waddle {
    0%, 100% { transform: rotate(-6deg); }
    50% { transform: rotate(6deg) translateY(-10px); }
}
.walking .emoji:not(#heart-gift) { animation: waddle 0.6s infinite; }

#p-intro { transform: translateX(-180%); opacity: 0; }
#c-intro { transform: translateX(180%) scaleX(-1); opacity: 0; }

.arrived #p-intro { transform: translateX(0); opacity: 1; animation: none; }
.arrived #c-intro { transform: translateX(0) scaleX(-1); opacity: 1; animation: none; }
.arrived #heart-gift { opacity: 1; transform: scale(1.3) translateX(0); animation: heartbeat 1.5s infinite 4.5s; }

/* ADJUSTED FOR LONGER BUTTON TEXT */
.btn {
    background: var(--pink); color: white; border: none;
    padding: 18px 35px; border-radius: 50px; font-weight: bold;
    font-size: clamp(1rem, 4vw, 1.2rem); margin-top: 50px; cursor: pointer;
    box-shadow: 0 0 25px rgba(255, 45, 117, 0.5);
    z-index: 100; transition: 0.3s;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.btn:hover { transform: scale(1.05); box-shadow: 0 0 40px var(--pink); }

#matrixCanvas { position: fixed; top: 0; left: 0; z-index: 1; opacity: 0; transition: 1.2s; pointer-events: none; }
#count-number { 
    font-family: 'Poppins', sans-serif; font-size: clamp(8rem, 35vw, 14rem); 
    color: var(--pink); text-shadow: 0 0 50px var(--pink); z-index: 50; 
}
#reveal-title {
    z-index: 100; font-family: 'Dancing Script', cursive;
    font-size: clamp(2.8rem, 12vw, 5rem); color: transparent; 
    -webkit-text-stroke: 2px var(--pink); filter: drop-shadow(0 0 20px var(--pink));
    margin: 0 0 20px 0; opacity: 0; transition: 1.5s; text-align: center;
}

#letter-container {
    z-index: 101; width: 92%; max-width: 550px;
    background: rgba(0, 0, 0, 0.55); backdrop-filter: blur(12px);
    padding: 25px; border-radius: 35px; border: 1px solid rgba(255, 45, 117, 0.3);
    opacity: 0; transform: translateY(30px); transition: 1.5s;
}
#gif-display { width: 100%; height: clamp(140px, 25vh, 200px); display: flex; justify-content: center; align-items: center; margin-bottom: 15px; border-radius: 20px; overflow: hidden; }
#gif-display img { max-width: 100%; max-height: 100%; object-fit: contain; filter: drop-shadow(0 0 10px var(--pink)); }
#scroll-box { width: 100%; max-height: 250px; overflow-y: auto; padding-right: 15px; }
#scroll-box::-webkit-scrollbar { width: 4px; }
#scroll-box::-webkit-scrollbar-thumb { background: var(--pink); border-radius: 10px; }
#letter-text { font-family: 'Dancing Script'; font-size: clamp(1.5rem, 6vw, 2rem); line-height: 1.6; color: white; text-shadow: 2px 2px 10px rgba(0,0,0,1); text-align: left; }

@keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.25); } }